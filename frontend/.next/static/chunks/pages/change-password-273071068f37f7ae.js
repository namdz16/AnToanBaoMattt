(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{596:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>c});var t=n(8888),a=n(7876),s=n(4232),o=n(9350),l=n(3588);function u(){let e=(0,t._)(["\n  mutation ChangePassword($username: String!, $oldPassword: String!, $newPassword: String!) {\n    changePassword(username: $username, oldPassword: $oldPassword, newPassword: $newPassword)\n  }\n"]);return u=function(){return e},e}let i=(0,o.J1)(u());function c(){let[e,r]=(0,s.useState)(""),[n,t]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),[c,{data:d,error:g}]=(0,l.n)(i),f=async r=>{r.preventDefault(),await c({variables:{username:e,oldPassword:n,newPassword:o}})};return(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 rounded-2xl shadow-lg border border-orange-200 bg-white flex flex-col items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-orange-500 mb-4",children:"Đổi mật khẩu"}),(0,a.jsxs)("form",{onSubmit:f,className:"w-full flex flex-col gap-4",children:[(0,a.jsx)("input",{value:e,onChange:e=>r(e.target.value),placeholder:"Username",className:"border p-2 rounded focus:ring-2 focus:ring-orange-400"}),(0,a.jsx)("input",{value:n,onChange:e=>t(e.target.value),type:"password",placeholder:"Old Password",className:"border p-2 rounded focus:ring-2 focus:ring-orange-400"}),(0,a.jsx)("input",{value:o,onChange:e=>u(e.target.value),type:"password",placeholder:"New Password",className:"border p-2 rounded focus:ring-2 focus:ring-orange-400"}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded bg-orange-500 text-white font-semibold hover:bg-orange-600 transition",children:"Đổi mật khẩu"}),d&&(0,a.jsx)("div",{className:"text-green-600 text-sm",children:d.changePassword}),g&&(0,a.jsx)("div",{className:"text-red-500 text-sm",children:g.message})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-2 text-sm",children:[(0,a.jsxs)("span",{children:["Quay lại ",(0,a.jsx)("a",{href:"/login",className:"text-orange-500 hover:underline",children:"Đăng nhập"})]}),(0,a.jsxs)("span",{children:["Chưa c\xf3 t\xe0i khoản? ",(0,a.jsx)("a",{href:"/register",className:"text-orange-500 hover:underline",children:"Đăng k\xfd"})]})]})]})})}},3588:(e,r,n)=>{"use strict";n.d(r,{n:()=>d});var t=n(4902),a=n(427),s=n(8877),o=n(996),l=n(7510),u=n(3070),i=n(7994),c=n(542).Sw?a.useLayoutEffect:a.useEffect;function d(e,r){var n=(0,i.m)(null==r?void 0:r.client);(0,l.D$)(e,l.KG.Mutation);var d=a.useState({called:!1,loading:!1,client:n}),g=d[0],f=d[1],m=a.useRef({result:g,mutationId:0,isMounted:!0,client:n,mutation:e,options:r});c(function(){Object.assign(m.current,{client:n,options:r,mutation:e})});var h=a.useCallback(function(e){void 0===e&&(e={});var r=m.current,n=r.options,a=r.mutation,l=(0,t.Cl)((0,t.Cl)({},n),{mutation:a}),i=e.client||m.current.client;m.current.result.loading||l.ignoreResults||!m.current.isMounted||f(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:i});var c=++m.current.mutationId,d=(0,s.l)(l,e);return i.mutate(d).then(function(r){var n,t,a=r.data,s=r.errors,l=s&&s.length>0?new u.K4({graphQLErrors:s}):void 0,g=e.onError||(null==(n=m.current.options)?void 0:n.onError);if(l&&g&&g(l,d),c===m.current.mutationId&&!d.ignoreResults){var h={called:!0,loading:!1,data:a,error:l,client:i};m.current.isMounted&&!(0,o.L)(m.current.result,h)&&f(m.current.result=h)}var v=e.onCompleted||(null==(t=m.current.options)?void 0:t.onCompleted);return l||null==v||v(r.data,d),r},function(r){if(c===m.current.mutationId&&m.current.isMounted){var n,t={loading:!1,error:r,data:void 0,called:!0,client:i};(0,o.L)(m.current.result,t)||f(m.current.result=t)}var a=e.onError||(null==(n=m.current.options)?void 0:n.onError);if(a)return a(r,d),{data:void 0,errors:r};throw r})},[]),v=a.useCallback(function(){if(m.current.isMounted){var e={called:!1,loading:!1,client:m.current.client};Object.assign(m.current,{mutationId:0,result:e}),f(e)}},[]);return a.useEffect(function(){var e=m.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[h,(0,t.Cl)({reset:v},g)]}},7256:(e,r,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/change-password",function(){return n(596)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[969,636,593,792],()=>r(7256)),_N_E=e.O()}]);