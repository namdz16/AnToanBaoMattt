(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{644:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return t(7473)}])},3588:(e,n,t)=>{"use strict";t.d(n,{n:()=>d});var r=t(4902),o=t(427),a=t(8877),i=t(996),u=t(7510),l=t(3070),s=t(7994),c=t(542).Sw?o.useLayoutEffect:o.useEffect;function d(e,n){var t=(0,s.m)(null==n?void 0:n.client);(0,u.D$)(e,u.KG.Mutation);var d=o.useState({called:!1,loading:!1,client:t}),g=d[0],m=d[1],f=o.useRef({result:g,mutationId:0,isMounted:!0,client:t,mutation:e,options:n});c(function(){Object.assign(f.current,{client:t,options:n,mutation:e})});var h=o.useCallback(function(e){void 0===e&&(e={});var n=f.current,t=n.options,o=n.mutation,u=(0,r.Cl)((0,r.Cl)({},t),{mutation:o}),s=e.client||f.current.client;f.current.result.loading||u.ignoreResults||!f.current.isMounted||m(f.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:s});var c=++f.current.mutationId,d=(0,a.l)(u,e);return s.mutate(d).then(function(n){var t,r,o=n.data,a=n.errors,u=a&&a.length>0?new l.K4({graphQLErrors:a}):void 0,g=e.onError||(null==(t=f.current.options)?void 0:t.onError);if(u&&g&&g(u,d),c===f.current.mutationId&&!d.ignoreResults){var h={called:!0,loading:!1,data:o,error:u,client:s};f.current.isMounted&&!(0,i.L)(f.current.result,h)&&m(f.current.result=h)}var v=e.onCompleted||(null==(r=f.current.options)?void 0:r.onCompleted);return u||null==v||v(n.data,d),n},function(n){if(c===f.current.mutationId&&f.current.isMounted){var t,r={loading:!1,error:n,data:void 0,called:!0,client:s};(0,i.L)(f.current.result,r)||m(f.current.result=r)}var o=e.onError||(null==(t=f.current.options)?void 0:t.onError);if(o)return o(n,d),{data:void 0,errors:n};throw n})},[]),v=o.useCallback(function(){if(f.current.isMounted){var e={called:!1,loading:!1,client:f.current.client};Object.assign(f.current,{mutationId:0,result:e}),m(e)}},[]);return o.useEffect(function(){var e=f.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[h,(0,r.Cl)({reset:v},g)]}},7473:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var r=t(8888),o=t(7876),a=t(4232),i=t(9099),u=t(9350),l=t(3588);function s(){let e=(0,r._)(["\n  mutation LoginAdmin($username: String!, $password: String!) {\n    loginAdmin(username: $username, password: $password)\n  }\n"]);return s=function(){return e},e}let c=(0,u.J1)(s());function d(){let[e,n]=(0,a.useState)(""),[t,r]=(0,a.useState)(""),[u,s]=(0,a.useState)(""),d=(0,i.useRouter)(),[g,{loading:m}]=(0,l.n)(c),f=async n=>{n.preventDefault(),s("");try{let{data:n}=await g({variables:{username:e,password:t}});if(null==n?void 0:n.loginAdmin){if(localStorage.setItem("admin_token",n.loginAdmin),!localStorage.getItem("admin_token"))return void s("Kh\xf4ng lưu được token. H\xe3y thử lại hoặc kiểm tra tr\xecnh duyệt.");d.push("/admin/dashboard")}else s("Đăng nhập thất bại: Kh\xf4ng nhận được token")}catch(e){var r,o;s((null==e||null==(o=e.graphQLErrors)||null==(r=o[0])?void 0:r.message)||e.message||"Đăng nhập thất bại")}};return(0,o.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:(0,o.jsxs)("div",{className:"w-full max-w-md p-8 rounded-2xl shadow-lg border border-orange-200 bg-white flex flex-col items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-orange-500 mb-4",children:"Đăng nhập Admin"}),(0,o.jsxs)("form",{onSubmit:f,className:"w-full flex flex-col gap-4",children:[(0,o.jsx)("input",{className:"border p-2 rounded focus:ring-2 focus:ring-orange-400",placeholder:"Username",value:e,onChange:e=>n(e.target.value)}),(0,o.jsx)("input",{className:"border p-2 rounded focus:ring-2 focus:ring-orange-400",placeholder:"Password",type:"password",value:t,onChange:e=>r(e.target.value)}),u&&(0,o.jsx)("div",{className:"text-red-500 text-sm",children:u}),(0,o.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded bg-orange-500 text-white font-semibold hover:bg-orange-600 transition",disabled:m,children:m?"Đang đăng nhập...":"Đăng nhập"})]})]})})}},9099:(e,n,t)=>{e.exports=t(8253)}},e=>{var n=n=>e(e.s=n);e.O(0,[969,636,593,792],()=>n(644)),_N_E=e.O()}]);