(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{1996:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(8888),i=n(7876),s=n(6039),u=n(9350),l=n(4431),a=n(3588);function o(){let e=(0,r._)(["query { getUsers }"]);return o=function(){return e},e}function c(){let e=(0,r._)(["mutation($username: String!) { deleteUser(username: $username) }"]);return c=function(){return e},e}function d(){let e=(0,r._)(["mutation($username: String!) { unlockUser(username: $username) }"]);return d=function(){return e},e}let m=(0,u.J1)(o()),f=(0,u.J1)(c()),g=(0,u.J1)(d()),x=(0,s.A)(function(){let{data:e,loading:t,error:n,refetch:r}=(0,l.IT)(m),[s]=(0,a.n)(f),[u]=(0,a.n)(g);return(0,i.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:(0,i.jsxs)("div",{className:"w-full max-w-2xl p-8 rounded-2xl shadow-lg border border-orange-200 bg-white flex flex-col items-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-orange-500 mb-6",children:"Danh s\xe1ch người d\xf9ng"}),t&&(0,i.jsx)("div",{className:"text-gray-500",children:"Đang tải dữ liệu..."}),n&&(0,i.jsxs)("div",{className:"text-red-500",children:["Lỗi: ",n.message]}),(0,i.jsx)("ul",{className:"w-full flex flex-col gap-3",children:(null==e?void 0:e.getUsers)&&e.getUsers.length>0?e.getUsers.map(e=>(0,i.jsxs)("li",{className:"flex items-center justify-between bg-orange-50 rounded px-4 py-2 border border-orange-100",children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:e}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:async()=>{await s({variables:{username:e.split(" - ")[0]}}),r()},className:"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600 transition text-sm",children:"X\xf3a"}),(0,i.jsx)("button",{onClick:async()=>{await u({variables:{username:e.split(" - ")[0]}}),r()},className:"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600 transition text-sm",children:"Mở kh\xf3a"})]})]},e)):!t&&(0,i.jsx)("li",{className:"text-gray-500 text-center w-full",children:"Kh\xf4ng c\xf3 người d\xf9ng n\xe0o."})})]})})})},3588:(e,t,n)=>{"use strict";n.d(t,{n:()=>d});var r=n(4902),i=n(427),s=n(8877),u=n(996),l=n(7510),a=n(3070),o=n(7994),c=n(542).Sw?i.useLayoutEffect:i.useEffect;function d(e,t){var n=(0,o.m)(null==t?void 0:t.client);(0,l.D$)(e,l.KG.Mutation);var d=i.useState({called:!1,loading:!1,client:n}),m=d[0],f=d[1],g=i.useRef({result:m,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});c(function(){Object.assign(g.current,{client:n,options:t,mutation:e})});var x=i.useCallback(function(e){void 0===e&&(e={});var t=g.current,n=t.options,i=t.mutation,l=(0,r.Cl)((0,r.Cl)({},n),{mutation:i}),o=e.client||g.current.client;g.current.result.loading||l.ignoreResults||!g.current.isMounted||f(g.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:o});var c=++g.current.mutationId,d=(0,s.l)(l,e);return o.mutate(d).then(function(t){var n,r,i=t.data,s=t.errors,l=s&&s.length>0?new a.K4({graphQLErrors:s}):void 0,m=e.onError||(null==(n=g.current.options)?void 0:n.onError);if(l&&m&&m(l,d),c===g.current.mutationId&&!d.ignoreResults){var x={called:!0,loading:!1,data:i,error:l,client:o};g.current.isMounted&&!(0,u.L)(g.current.result,x)&&f(g.current.result=x)}var v=e.onCompleted||(null==(r=g.current.options)?void 0:r.onCompleted);return l||null==v||v(t.data,d),t},function(t){if(c===g.current.mutationId&&g.current.isMounted){var n,r={loading:!1,error:t,data:void 0,called:!0,client:o};(0,u.L)(g.current.result,r)||f(g.current.result=r)}var i=e.onError||(null==(n=g.current.options)?void 0:n.onError);if(i)return i(t,d),{data:void 0,errors:t};throw t})},[]),v=i.useCallback(function(){if(g.current.isMounted){var e={called:!1,loading:!1,client:g.current.client};Object.assign(g.current,{mutationId:0,result:e}),f(e)}},[]);return i.useEffect(function(){var e=g.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[x,(0,r.Cl)({reset:v},m)]}},6039:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(7876),i=n(4232),s=n(9099);function u(e){return function(t){let n=(0,s.useRouter)();return(0,i.useEffect)(()=>{localStorage.getItem("admin_token")||n.replace("/admin/login")},[n]),(0,r.jsx)(e,{...t})}}},7852:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/user-list",function(){return n(1996)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[969,393,636,593,792],()=>t(7852)),_N_E=e.O()}]);