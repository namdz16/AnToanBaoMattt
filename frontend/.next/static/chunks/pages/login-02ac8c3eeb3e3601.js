(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{1705:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var r=t(8888),a=t(7876),o=t(4232),s=t(9350),l=t(3588),u=t(9099);function i(){let e=(0,r._)(["\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password)\n  }\n"]);return i=function(){return e},e}let c=(0,s.J1)(i());function d(){let[e,n]=(0,o.useState)(""),[t,r]=(0,o.useState)(""),[s,{data:i,error:d,loading:g}]=(0,l.n)(c),h=(0,u.useRouter)(),m=async n=>{var r,a;n.preventDefault();let o=await s({variables:{username:e,password:t}});(null==(r=o.data)?void 0:r.login)&&(a=o.data.login,localStorage.setItem("auth_token",a),h.push("/"))};return(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 rounded-2xl shadow-lg border border-orange-200 bg-white flex flex-col items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-orange-500 mb-4",children:"Đăng nhập"}),(0,a.jsxs)("form",{onSubmit:m,className:"w-full flex flex-col gap-4",children:[(0,a.jsx)("input",{value:e,onChange:e=>n(e.target.value),placeholder:"Username",className:"border p-2 rounded focus:ring-2 focus:ring-orange-400"}),(0,a.jsx)("input",{value:t,onChange:e=>r(e.target.value),type:"password",placeholder:"Password",className:"border p-2 rounded focus:ring-2 focus:ring-orange-400"}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 px-4 rounded bg-orange-500 text-white font-semibold hover:bg-orange-600 transition",disabled:g,children:g?"Đang đăng nhập...":"Đăng nhập"}),i&&(0,a.jsx)("div",{className:"text-green-600 text-sm",children:"Đăng nhập th\xe0nh c\xf4ng!"}),d&&(0,a.jsx)("div",{className:"text-red-500 text-sm",children:d.message})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-2 text-sm",children:[(0,a.jsxs)("span",{children:["Chưa c\xf3 t\xe0i khoản? ",(0,a.jsx)("a",{href:"/register",className:"text-orange-500 hover:underline",children:"Đăng k\xfd"})]}),(0,a.jsxs)("span",{children:["Qu\xean mật khẩu hoặc muốn đổi mật khẩu? ",(0,a.jsx)("a",{href:"/change-password",className:"text-orange-500 hover:underline",children:"Đổi mật khẩu"})]})]})]})})}},3588:(e,n,t)=>{"use strict";t.d(n,{n:()=>d});var r=t(4902),a=t(427),o=t(8877),s=t(996),l=t(7510),u=t(3070),i=t(7994),c=t(542).Sw?a.useLayoutEffect:a.useEffect;function d(e,n){var t=(0,i.m)(null==n?void 0:n.client);(0,l.D$)(e,l.KG.Mutation);var d=a.useState({called:!1,loading:!1,client:t}),g=d[0],h=d[1],m=a.useRef({result:g,mutationId:0,isMounted:!0,client:t,mutation:e,options:n});c(function(){Object.assign(m.current,{client:t,options:n,mutation:e})});var f=a.useCallback(function(e){void 0===e&&(e={});var n=m.current,t=n.options,a=n.mutation,l=(0,r.Cl)((0,r.Cl)({},t),{mutation:a}),i=e.client||m.current.client;m.current.result.loading||l.ignoreResults||!m.current.isMounted||h(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:i});var c=++m.current.mutationId,d=(0,o.l)(l,e);return i.mutate(d).then(function(n){var t,r,a=n.data,o=n.errors,l=o&&o.length>0?new u.K4({graphQLErrors:o}):void 0,g=e.onError||(null==(t=m.current.options)?void 0:t.onError);if(l&&g&&g(l,d),c===m.current.mutationId&&!d.ignoreResults){var f={called:!0,loading:!1,data:a,error:l,client:i};m.current.isMounted&&!(0,s.L)(m.current.result,f)&&h(m.current.result=f)}var v=e.onCompleted||(null==(r=m.current.options)?void 0:r.onCompleted);return l||null==v||v(n.data,d),n},function(n){if(c===m.current.mutationId&&m.current.isMounted){var t,r={loading:!1,error:n,data:void 0,called:!0,client:i};(0,s.L)(m.current.result,r)||h(m.current.result=r)}var a=e.onError||(null==(t=m.current.options)?void 0:t.onError);if(a)return a(n,d),{data:void 0,errors:n};throw n})},[]),v=a.useCallback(function(){if(m.current.isMounted){var e={called:!1,loading:!1,client:m.current.client};Object.assign(m.current,{mutationId:0,result:e}),h(e)}},[]);return a.useEffect(function(){var e=m.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[f,(0,r.Cl)({reset:v},g)]}},7984:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(1705)}])},9099:(e,n,t)=>{e.exports=t(8253)}},e=>{var n=n=>e(e.s=n);e.O(0,[969,636,593,792],()=>n(7984)),_N_E=e.O()}]);